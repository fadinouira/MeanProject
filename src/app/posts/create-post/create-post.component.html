<div class="spinner" *ngIf="isLoading">
  <mat-progress-spinner class="spinner" mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
<mat-card *ngIf="!isLoading">

  <form [formGroup]="form" (ngSubmit)="onAdd()" >

    <mat-form-field  class="example-full-width">
      <mat-label>Title</mat-label>
      <input matInput  name="title" formControlName="title">
      <mat-error *ngIf="form.get('title').invalid">A post must have a title</mat-error>
    </mat-form-field>

    <br><br>

    <div>
      <button mat-stroked-button type="button" (click)="filePicker.click()">Choose file</button>
      <input type="file" hidden #filePicker (change)="onImagePicked($event)">
      <mat-error *ngIf="form.get('image').invalid && this.clicked ">Must select an Image</mat-error>
    </div>

    <div class="image-preview" *ngIf="imgUrl != '' && imgUrl != NULL && form.get('image').valid">
      <img class="image-preview-img" [src]="imgUrl" [alt]="form.value.title" (click)="filePicker.click()">
    </div>


    <mat-form-field  class="example-full-width">
      <mat-label>Write a post</mat-label>
      <textarea rows="6" matInput placeholder="Ex. It makes me feel..." name="content" formControlName="content" ></textarea>
      <mat-error *ngIf="form.get('content').invalid">A post can't be empty</mat-error>
    </mat-form-field>

    <br><br>

    <button mat-raised-button color="primary"  type="submit">{{this.mode}}</button>

  </form>

</mat-card>





